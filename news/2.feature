`listen_for_events()` is now blocking, but uses new @on dectorator to call functions like in node.js